$(function(a){var b=document.createElement("div");b.id="ok-lorgnette",b.style.position="absolute",b.style.backgroundRepeat="no-repeat",b.style.pointerEvents="none",b.style.display="none",b.style.zIndex=7879,document.body.appendChild(b),a.okzoom=function(c,d){var e=this;e.$el=a(c),e.el=c,e.$el.data("okzoom",e),e.init=function(){e.options=a.extend({},a.okzoom.options,d),e.el.onmouseover=e.build,e.el.onmousemove=e.mousemove,e.el.onmouseout=e.mouseout,e.options.height=e.options.height||e.options.width;var b=e.$el.data("okimage");e.has_data_image="undefined"!=typeof b,e.has_data_image&&(e.img=new Image,e.img.src=b)},e.build=function(){e.has_data_image||(e.img=e.el),e.offset=e.$el.offset(),e.width=e.$el.width(),e.height=e.$el.height(),e.options.scaleWidth?(e.naturalWidth=e.options.scaleWidth,e.naturalHeight=Math.round(e.img.naturalHeight*e.options.scaleWidth/e.img.naturalWidth)):(e.naturalWidth=e.img.naturalWidth,e.naturalHeight=e.img.naturalHeight),e.widthRatio=e.naturalWidth/e.width,e.heightRatio=e.naturalHeight/e.height,b.style.width=e.options.width+"px",b.style.height=e.options.height+"px",b.style.border=e.options.border,b.style.background=e.options.background+" url("+e.img.src+")",b.style.backgroundRepeat=e.options.backgroundRepeat,b.style.backgroundSize=e.options.scaleWidth?e.naturalWidth+"px "+e.naturalHeight+"px":"auto",b.style.borderRadius=b.style.OBorderRadius=b.style.MozBorderRadius=b.style.WebkitBorderRadius=e.options.round?e.options.width+"px":0,b.style.boxShadow=e.options.shadow},e.mousemove=function(a){var c=e.options.width/2,d=e.options.height/2,f=-1*Math.floor((a.pageX-e.offset.left)*e.widthRatio-c),g=-1*Math.floor((a.pageY-e.offset.top)*e.heightRatio-d);document.body.style.cursor="none",b.style.display="block",b.style.left=a.pageX-c+"px",b.style.top=a.pageY-d+"px",b.style.backgroundPosition=f+"px "+g+"px"},e.mouseout=function(){b.style.display="none",b.style.background="none",document.body.style.cursor="auto"},e.init()},a.okzoom.options={width:150,height:null,scaleWidth:null,round:!0,background:"#fff",backgroundRepeat:"no-repeat",shadow:"0 0 5px #000",border:0},a.fn.okzoom=function(b){return this.each(function(){new a.okzoom(this,b)})}});